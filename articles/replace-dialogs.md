---
title: ダイアログを業務プロセス フローまたはキャンバス アプリに置き換える | MicrosoftDocs
ms.custom: ''
ms.date: 08/02/2018
ms.reviewer: ''
ms.service: flow
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: conceptual
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- flow
ms.assetid: 046480e6-f2ff-4c56-9e03-f642c982ff7d
caps.latest.revision: 12
author: Mattp123
ms.author: matp
manager: kvivek
search.app:
- Flow
search.audienceType:
- flowmaker
- enduser
ms.openlocfilehash: b338991cfdbb73a8a0464fd4322714ece82c2ac5
ms.sourcegitcommit: 835b005284b9ae21ae1742a7d36b574ba3884bef
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/29/2020
ms.locfileid: "74373023"
---
# <a name="replace-dialogs-with-business-process-flows-or-canvas-apps"></a>ダイアログを業務プロセス フローまたはキャンバス アプリに置き換える
[!INCLUDE [view-pending-approvals](includes/cc-rebrand.md)]

[ダイアログは非推奨](https://docs.microsoft.com/dynamics365/get-started/whats-new/customer-engagement/important-changes-coming#dialogs-are-deprecated)となりましたので、業務プロセス フローまたはキャンバス アプリに置き換える必要があります。 このトピックでは、これらのオプションのさまざまな機能を説明すると共に、既存のダイアログを、モデル駆動型フォームに埋め込まれた業務プロセス フローおよびキャンバス アプリに置き換えることができる状況について説明します。

## <a name="feature-capability-comparison"></a>機能の性能比較

次の表に、ダイアログの機能セットと、それに相当する業務プロセス フローおよびキャンバス アプリ内の機能を一覧表示します。


|ダイアログの機能  | 相当する機能が業務プロセス フロー内にあるか?  | 相当する機能がキャンバス アプリ内にあるか?  |
|---------|---------|---------|
|ページ     | はい <br/> (業務プロセス フロー)    | はい <br/> (アプリ画面)        |
|プロンプトのみ   |  いいえ    |  はい <br/> (ラベル)        |
|プロンプトと応答     |  はい <br/> (エンティティ属性のみ)    | はい <br/> (ラベルと入力フィールド)    |
|入力引数     |  制限あり <br/> (業務プロセス ステージ内のステップ)    | はい <br/> (クエリ文字列パラメーター)     |
|変数   |  いいえ     |  はい       |
|テキスト変数    |  いいえ     |  はい     |
|条件分岐ロジック    |  はい     | はい <br/>  (アプリ内の任意の画面に移動)    |
|再利用 <br/> (子ダイアログとして起動)   |  いいえ     | はい <br/> (アプリ内の任意の画面に移動、異なるアプリを新しいウィンドウで起動)     |
|開始/終了時にワークフローを実行    |   はい      |  いいえ <br/> (代わりにフローを使用)  |
|入力時にワークフローを実行    | はい    | いいえ <br/> (代わりにフローを使用)   |
|ページの切り替え時にワークフローを実行   |  はい       | いいえ <br/> (代わりにフローを使用)    |
|URL を使用して開始  |   いいえ      |  はい     |
|セッションのログ記録    |  はい       |  いいえ     |
|SDK のサポート   |  はい     |  はい     |

### <a name="additional-capabilities-with-business-process-flows"></a>業務プロセス フローでの追加の機能
- プロセス分析 (ビュー、グラフ、および 1 つのステージで費やされた時間)
- カスタム コントロール

### <a name="additional-capabilities-with-canvas-apps"></a>キャンバス アプリでの追加の機能
- アプリの分析 (アプリの使用状況とパフォーマンス)
- 複数のエンティティ ページによる構成
- フローの実行
- データ コネクタ (標準とカスタム)
- スタンドアロン アプリとしての起動
- 構成可能なレイアウト

## <a name="choosing-between-a-business-process-flow-or-canvas-app"></a>業務プロセス フローまたはキャンバス アプリのいずれかを選択する
ダイアログの置き換えを選択する場合は、提供するユーザー エクスペリエンスを考慮することが重要です。 また、ほぼすべてのダイアログはキャンバス アプリを使用してモデル化できる点に留意してください。

個人および Dynamics 365 アプリ コンテキストのグループの間でコラボレーションを必要とする最上位のワークストリーム全体にガイダンスを提供するプロセスをモデル化するダイアログは、業務プロセス フローに置き換えるのが最適です。 見積もりのレビューや転送が例として挙げられます。 

あるいは、規範的なタスク (潜在顧客を予測するためのコール スクリプトなど) をモデル化するダイアログをキャンパス アプリに置き換えたり、キャンパス アプリを使用して、営業案件の更新など、その他のタスク用のユーザー エクスペリエンスを簡略化したりすることもできます。 これらのシナリオでは、スタンドアロンのキャンバス アプリに置き換えた場合でも利点が得られることがあることに注目してください。 

## <a name="dialog-replacement-using-business-process-flow-scenario"></a>業務プロセス フロー シナリオを使用することによるダイアログの置き換え
一連のページ上において、ユーザーに主要な情報を要求し、見積もりを作成した上で、その見積もりを顧客に電子メールで送信する前に見積もりの承認または却下を判断するレビュー担当者に電子メールを送信するダイアログがあるとします。 この種のプロセスは業務プロセス フローを使用することで、より効率的にモデル化されます。 

ダイアログを置き換えるには、プロセス内の主要なステージを識別することから始めます。 主要なステージとしては、すべての製品の一覧表示および割引の適用が確実に行われるようにする "*コンテンツの準備*" ステージ、見積もりを作成し、その形式の正確性を確認する "*見積もりの生成*" ステージ、レビューを受け承認を得るために見積もりを送信する "*プライマリ レビュー*" ステージ、特定の状況下で最終的に見積もりのレビューを行う "*セカンダリ レビュー*" ステージ、顧客に見積もりを送信する "*見積もりの配信*" ステージなどがあります。

次に、ユーザーがプロセス内で従う必要のある主要なステップを識別します。 たとえば、"*コンテンツの準備*" ステージには、ユーザーが見積もり対象の製品をダブルチェックするためのシンプルな true/false ステップ、価格リストを選択するための必須のルックアップ ステップ、次のステップに進む前に割引価格を入力するための数値ステップが含まれます。 "*見積もりの生成*" ステージには、"*コンテンツの準備*" ステージで前に取得したすべての情報と、それに関連する Dynamics 365 レコードに基づいて見積もりを作成する[アクション ステップ](create-business-process-flow.md#add-an-on-demand-action-to-a-business-process-flow)があります。 "*プライマリ レビュー*" ステージと "*セカンダリ レビュー*" ステージには、見積もりのレビューをガイドする true/false ステップに加えて、承認の状態を取得する必須のステップが含まれます。これにより、承認が受信された場合にしかプロセスは次のステージに進めないようになっています。 このステップでは、認証されたレビュー担当者のみが、見積もりに対して承認を与えることができるように[フィールド レベル セキュリティ](/customer-engagement/admin/field-level-security)を構成します。  さらに、"*プライマリ レビュー*" ステージおよび "*セカンダリ レビュー*" ステージには、ワークフローを追加することもできます (入力すると電子メール通知がすべてのレビュー担当者に送信される、などのワークフロー)。 

最後に、業務プロセス フローのステージとステップに加えて、プロセス フローをガイドする条件ロジックを構成します。 この例では、"*プライマリ レビュー*" の後に次のような[条件分岐](enhance-business-process-flows-branching.md)を追加できます。ステップによって、セカンダリ レベルのレビューの必要性が示された場合、プロセスの次のステージは "*セカンダリ レビュー*" ステージとなり、それ以外の場合は、"*見積もりの配信*" ステージとなります。

この業務プロセスをユーザーが使用できるようにするには、適切なユーザーが確実に業務プロセス フローに対する権限を有しそれをアクティブ化できるようにします。

業務プロセス フローを作成する方法の詳細については、「[チュートリアル: プロセスを標準化する業務プロセス フローを作成する](create-business-process-flow.md)」を参照してください。

## <a name="dialog-replacement-using-canvas-app-scenario"></a>キャンバス アプリ シナリオを使用したダイアログの置き換え

潜在顧客への売り込み電話を通して販売担当者をガイドするコール スクリプトに従うダイアログがあるとします。 このプロセスは、キャンバス アプリを使用することで簡単にキャプチャできます。

データの読み書きの対象とするデータ ソースに接続することから開始します。 この例では、潜在顧客、アカウント、および連絡先の情報については、[Dynamics 365 への接続](/powerapps/maker/canvas-apps/connections/connection-dynamics-crmonline)が使用されます。

必要な画面の数を特定することから始めます。 この例では、5 つの画面を使用することに決めます。 
-   画面 1。 リストから電話をかける潜在顧客を選択します。
-   画面 2。 紹介、会話が可能かどうかの確認、および後日の電話のかけ直しのスケジュール設定を行います。 
-   画面 3。 BANT (予算、機関、必要性、タイムライン) を決定します。 
-   画面 4。 次の手順を取り込んで、フォロー アップ通話をスケジュールします。 
-   画面 5。 通話の最後で、時間を割いてくれたことに対して潜在顧客にお礼を言います。

次に、各画面をビルドします。 最初の画面では、電話する必要がある潜在顧客の[ギャラリーをビルド](/powerapps/maker/canvas-apps/customize-layout-sharepoint)します。 2 番目では、ラベルを使用して画面にタイトルを付けてコール スクリプトを指定する一方で、ラジオ ボタンなどのコントロールを使用して人が話すのに適した時間であるかどうかを取り込みます。 適切である場合は、条件ロジックを使用して、次の画面に移動するためのボタンを有効にします。適切でない場合は、同じ画面上で、顧客への電話のかけ直しをスケジュールすることを試みるためのスクリプトを表示します。 同様に、後続の画面にわたって、使用するコール スクリプトを定義します。

最後に、[画面間の移動を定義](/powerapps/maker/canvas-apps/functions/function-navigate)します。 この例では、画面を順番に移動するだけでなく、2 番目の画面から最後の画面 (スクリプトの最後で、時間を割いてくれたことに対して潜在顧客にお礼を言う) にユーザーを移動することが必要な場合があります。それは潜在顧客が話し合いを持つことに関心がない場合です。

このアプリをユーザーが使用できるようにするには、アプリを公開します。 コール スクリプトを提供し迅速なデータ入力をサポートするスタンドアロン アプリが利用可能なことにより、このようなシナリオがどのように変化する可能性があるかを検討してください。

このエクスペリエンスを Dynamics 365 Sales に埋め込むとします。 これを行うには、まず、Dynamics 365 Sales フォーム上で iframe を作成します。 次に、[Power Apps] メニューから **[アプリ]** セクションに移動し、発行したばかりのアプリを選択し、 **[詳細]** タブの下にある Web リンクをコピーし、それを iframe の URL として貼り付けます。 

このステップをさらに見ていきます。このアプリが潜在顧客のメイン フォーム内で、および潜在顧客のコンテキスト内で直接利用できるようになることで、最初の画面内でユーザーがアプリから潜在顧客を選択するように求められることがないようにしたいと仮定します。 関連する情報をアプリに渡すには、フォームの読み込みなどの特定のイベントに対して実行される JavaScript を使用することにより、潜在顧客やアカウント ID などの情報を含むクエリ文字列を付加するように iframe URL を変更するだけです。 次に、アプリ内において、最初の画面 (潜在顧客の選択用) を削除し、代わりに [Param 関数](/powerapps/maker/canvas-apps/functions/function-param) を使用することによりクエリ文字列を介してアプリに渡される値にアクセスするように更新を行います。

## <a name="dialog-replacement-faq"></a>ダイアログの置き換えに関する FAQ

キャンバス アプリ上の依存関係は追跡されますか? 
- キャンバス アプリでの依存関係は、Dynamics 365 アプリ内の依存関係と同じ方法で追跡されます。

コマンド バー内のボタンからキャンバス アプリをポップアップとして起動することができますか?
- はい。 これを行うには、ターゲット URL をご利用のキャンバス アプリの URL に設定するだけです。その URL は前述の説明に従ってアプリの **[詳細]** セクションから取得します。

キャンバス アプリからワークフローを呼び出すことができますか?
- これはサポートされていません。 代わりにフローを使用することをお勧めします。 詳細情報: [ユーザー入力のあるボタン フローの概要](button-flow-with-user-input-tokens.md)

ダイアログを業務プロセス フローまたはキャンバス アプリに自動的に変換できますか?
- ダイアログを業務プロセス フローまたはキャンバス アプリに自動変換する方法はありません。


## <a name="see-also"></a>関連項目
[チュートリアル: プロセスを標準化する業務プロセス フローを作成する](create-business-process-flow.md) </br>
[Power Apps のキャンバス アプリとは](/powerapps/maker/canvas-apps/getting-started)


